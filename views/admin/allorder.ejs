<%- include("partial/header") %>

<div class="row">
    <%- include("partial/sidebar") %>
    
    <div class="col-lg-9" style="min-height: 90vh; padding: 2rem;">
        <h2 class="mb-4" style="color: #96b7e2;">All Orders</h2>

        <% if (orders.length === 0) { %>
            <div class="alert alert-warning" role="alert">
                No orders found.
            </div>
        <% } else { %>
            <table class="table table-striped table-dark table-hover align-middle">
                <thead>
                    <tr style="color: #ffffff;">
                        <th>#</th>
                        <th>Student Name</th>
                        <th>Course Name</th>
                        <th>Total Fee</th>
                        <th>Paid Fee</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <% orders.forEach((order, index) => { %>
                        <tr>
                            <td><%= index + 1 %></td>
                            <td><%= order.studentName %></td>
                            <td><%= order.courseName %></td>
                            <td>₹ <%= order.tfee %></td>
                            <td>₹ <%= order.pfee %></td>
                            <td>
                                <% if (parseInt(order.pfee) >= parseInt(order.tfee)) { %>
                                    <span class="badge bg-success">Completed</span>
                                <% } else { %>
                                    <span class="badge bg-warning text-dark">Pending</span>
                                <% } %>
                            </td>
                            <td class="d-flex gap-1 flex-wrap">
                                <a href="/admin/vieworder/<%= order._id %>" class="btn btn-info btn-sm" title="View Order">
                                    <i class="fas fa-eye"></i> View
                                </a>
                                <a href="/admin/editorder/<%= order._id %>" class="btn btn-warning btn-sm" title="Edit Order">
                                    <i class="fas fa-edit"></i> Edit
                                </a>
                                <a href="/admin/deleteorder/<%= order._id %>" class="btn btn-danger btn-sm" title="Delete Order">
                                    <i class="fas fa-trash"></i> Delete
                                </a>
                                <!-- ✅ Download Receipt Button -->
                                <a href="/admin/downloadreceipt/<%= order._id %>" class="btn btn-success btn-sm" title="Download Receipt">
                                    <i class="fas fa-download"></i> Receipt
                                </a>
                            </td>
                        </tr>
                    <% }) %>
                </tbody>
            </table>
        <% } %>
    </div>
</div>

<%- include("partial/footer") %>
<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>

<style>
    .table-hover tbody tr:hover {
        background-color: rgba(150, 183, 226, 0.2);
    }
    .badge {
        font-size: 0.9rem;
    }
</style>
